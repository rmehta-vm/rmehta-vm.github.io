<!-- Load custom CSS -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<!-- Mermaid for site rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (window.mermaid) {
      mermaid.initialize({ startOnLoad: true, securityLevel: "loose", theme: "default" });
      // Convert ```mermaid fenced code blocks into <div class="mermaid"> nodes
      document.querySelectorAll('pre code.language-mermaid, code.language-mermaid').forEach(code => {
        const pre = code.closest('pre');
        const div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = code.textContent;
        pre.replaceWith(div);
      });
      mermaid.run();
    }
  });
</script>
